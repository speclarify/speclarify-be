<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="940" height="460" viewBox="0 0 940 460">
  <style>
    .title { font: 20px sans-serif; }
    .label { font: 14px sans-serif; }
    .small { font: 12px sans-serif; }
    .lane { fill: #F9FAFB; stroke: #9CA3AF; stroke-width: 1; }
    .box { fill: #FFFFFF; stroke: #374151; stroke-width: 1.2; }
    .arrow { stroke: #111827; stroke-width: 1.5; marker-end: url(#arrowhead); fill: none; }
    .event { fill: #DBEAFE; stroke: #1E3A8A; stroke-width: 1; }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#111827" />
    </marker>
  </defs>
  <text x="24" y="36" class="title">Document Ingestion &amp; Requirement Pipeline</text>

  <rect x="40" y="60" width="130" height="360" class="lane" />
  <text x="60" y="90" class="label">Client</text>

  <rect x="190" y="60" width="140" height="360" class="lane" />
  <text x="212" y="90" class="label">Document API</text>

  <rect x="350" y="60" width="140" height="360" class="lane" />
  <text x="376" y="90" class="label">Event Bus</text>

  <rect x="510" y="60" width="150" height="360" class="lane" />
  <text x="528" y="90" class="label">Parser Services</text>

  <rect x="680" y="60" width="120" height="360" class="lane" />
  <text x="692" y="90" class="label">Requirement</text>

  <rect x="820" y="60" width="80" height="360" class="lane" />
  <text x="832" y="90" class="label">Ambiguity</text>

  <rect x="60" y="120" width="90" height="40" class="box" rx="8" ry="8" />
  <text x="80" y="145" class="small">Upload</text>

  <rect x="210" y="120" width="100" height="40" class="box" rx="8" ry="8" />
  <text x="225" y="146" class="small">Save + Emit</text>

  <line x1="150" y1="140" x2="210" y2="140" class="arrow" />
  <line x1="310" y1="140" x2="350" y2="140" class="arrow" />

  <rect x="370" y="120" width="110" height="36" class="event" rx="6" ry="6" />
  <text x="378" y="142" class="small">DocumentParseRequest.&lt;mime&gt;</text>

  <line x1="480" y1="138" x2="510" y2="138" class="arrow" />

  <rect x="530" y="120" width="120" height="40" class="box" rx="8" ry="8" />
  <text x="545" y="145" class="small">Split Content</text>
  <line x1="650" y1="140" x2="350" y2="200" class="arrow" />

  <rect x="370" y="200" width="110" height="36" class="event" rx="6" ry="6" />
  <text x="386" y="222" class="small">ParseRequirementsRequest</text>

  <line x1="480" y1="218" x2="510" y2="218" class="arrow" />

  <rect x="530" y="200" width="120" height="40" class="box" rx="8" ry="8" />
  <text x="538" y="225" class="small">LLM Extraction</text>
  <line x1="650" y1="220" x2="350" y2="280" class="arrow" />

  <rect x="370" y="280" width="110" height="36" class="event" rx="6" ry="6" />
  <text x="388" y="302" class="small">BulkCreateRequirementRequest</text>

  <line x1="480" y1="298" x2="680" y2="298" class="arrow" />

  <rect x="700" y="280" width="80" height="40" class="box" rx="8" ry="8" />
  <text x="708" y="306" class="small">Persist</text>

  <line x1="740" y1="320" x2="350" y2="360" class="arrow" />

  <rect x="370" y="360" width="110" height="36" class="event" rx="6" ry="6" />
  <text x="385" y="382" class="small">IdentifyAmbiguityRequest</text>

  <line x1="480" y1="378" x2="820" y2="378" class="arrow" />

  <rect x="830" y="360" width="60" height="40" class="box" rx="8" ry="8" />
  <text x="842" y="386" class="small">LLM</text>
  <text x="832" y="404" class="small">Analysis</text>

  <line x1="870" y1="400" x2="700" y2="360" class="arrow" />

  <text x="60" y="420" class="small">Each stage leverages LangChain, ConcurrencyLimit, and typed events to maintain throughput and traceability.</text>
</svg>
