<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="960" height="560" viewBox="0 0 960 560">
  <style>
    .title { font: 20px sans-serif; }
    .label { font: 14px sans-serif; }
    .small { font: 12px sans-serif; }
    .box { fill: #F4F6F8; stroke: #1F2933; stroke-width: 1.5; }
    .cluster { fill: #E0E7FF; stroke: #1F2933; stroke-dasharray: 5 3; }
    .arrow { stroke: #111827; stroke-width: 1.5; marker-end: url(#arrowhead); fill: none; }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#111827" />
    </marker>
  </defs>
  <text x="24" y="36" class="title">SpeClarify Architecture Overview</text>

  <rect x="40" y="60" width="420" height="310" class="cluster" rx="12" ry="12" />
  <text x="55" y="84" class="label">SpeClarify API (NestJS)</text>

  <rect x="70" y="110" width="160" height="60" class="box" rx="10" ry="10" />
  <text x="90" y="140" class="label">Authentication</text>
  <text x="110" y="160" class="small">Module</text>

  <rect x="260" y="110" width="160" height="60" class="box" rx="10" ry="10" />
  <text x="296" y="140" class="label">Project Module</text>

  <rect x="70" y="190" width="160" height="60" class="box" rx="10" ry="10" />
  <text x="90" y="220" class="label">Document Module</text>

  <rect x="260" y="190" width="160" height="60" class="box" rx="10" ry="10" />
  <text x="276" y="220" class="label">Requirement Module</text>

  <rect x="70" y="270" width="160" height="60" class="box" rx="10" ry="10" />
  <text x="86" y="300" class="label">Ambiguity Module</text>

  <rect x="260" y="270" width="160" height="60" class="box" rx="10" ry="10" />
  <text x="286" y="300" class="label">Dispatch Gateway</text>

  <rect x="160" y="340" width="160" height="60" class="box" rx="10" ry="10" />
  <text x="186" y="370" class="label">Chains Module</text>

  <rect x="520" y="60" width="180" height="170" class="cluster" rx="12" ry="12" />
  <text x="532" y="84" class="label">External Services</text>

  <rect x="540" y="110" width="140" height="40" class="box" rx="8" ry="8" />
  <text x="566" y="136" class="label">MongoDB</text>

  <rect x="540" y="160" width="140" height="40" class="box" rx="8" ry="8" />
  <text x="582" y="186" class="label">MinIO</text>

  <rect x="540" y="210" width="140" height="40" class="box" rx="8" ry="8" />
  <text x="586" y="236" class="label">Redis</text>

  <rect x="740" y="110" width="160" height="40" class="box" rx="8" ry="8" />
  <text x="768" y="136" class="label">OpenAI / LangChain</text>

  <rect x="740" y="160" width="160" height="40" class="box" rx="8" ry="8" />
  <text x="792" y="186" class="label">SMTP</text>

  <rect x="520" y="260" width="220" height="110" class="cluster" rx="12" ry="12" />
  <text x="532" y="284" class="label">Async Events</text>

  <rect x="540" y="310" width="180" height="30" class="box" rx="6" ry="6" />
  <text x="550" y="330" class="small">DocumentParseRequest.&lt;mime&gt;</text>

  <rect x="540" y="350" width="180" height="30" class="box" rx="6" ry="6" />
  <text x="574" y="370" class="small">ParseRequirementsRequest</text>

  <rect x="540" y="390" width="180" height="30" class="box" rx="6" ry="6" />
  <text x="554" y="410" class="small">BulkCreateRequirementRequest</text>

  <rect x="540" y="430" width="180" height="30" class="box" rx="6" ry="6" />
  <text x="576" y="450" class="small">IdentifyAmbiguityRequest</text>

  <line x1="410" y1="140" x2="540" y2="140" class="arrow" />
  <line x1="410" y1="140" x2="540" y2="210" class="arrow" />
  <line x1="230" y1="320" x2="540" y2="330" class="arrow" />
  <line x1="230" y1="320" x2="540" y2="370" class="arrow" />
  <line x1="230" y1="320" x2="540" y2="410" class="arrow" />

  <line x1="410" y1="220" x2="540" y2="180" class="arrow" />
  <line x1="410" y1="220" x2="540" y2="140" class="arrow" />
  <line x1="150" y1="220" x2="540" y2="180" class="arrow" />

  <line x1="410" y1="300" x2="540" y2="410" class="arrow" />
  <line x1="410" y1="300" x2="540" y2="350" class="arrow" />

  <line x1="320" y1="370" x2="740" y2="130" class="arrow" />
  <line x1="320" y1="370" x2="740" y2="170" class="arrow" />

  <line x1="410" y1="300" x2="586" y2="450" class="arrow" />
  <line x1="410" y1="140" x2="740" y2="130" class="arrow" />
  <line x1="410" y1="300" x2="740" y2="190" class="arrow" />

  <text x="60" y="430" class="small">Dispatch Gateway stores socket IDs in Redis and pushes actions to clients.</text>
</svg>
